
R version 3.5.1 (2018-07-02) -- "Feather Spray"
Copyright (C) 2018 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(pomp)
> 
> png(filename="pomp-%02d.png",res=100)
> 
> set.seed(3488585L)
> 
> pompExample(ricker)
newly created object(s):
 ricker 
> y1 <- obs(simulate(ricker,seed=1066L))
> r2 <- pomp(ricker,measurement.model=y~pois(lambda=N*phi))
> coef(r2) <- coef(ricker)
> y2 <- obs(simulate(r2,seed=1066L))
> max(abs(y1-y2))
[1] 0
> 
> try(obs(r2,vars="bob"))
Error : in 'obs': some elements of 'vars' correspond to no observed variable
> try(time(r2) <- "nancy")
Error : in 'time<-': 'value' must be a numeric vector
> invisible(window(r2,start=3,end=9))
> invisible(window(r2))
> invisible(window(r2,start=3))
> invisible(window(r2,end=11))
> try({rr2 <- r2; timezero(rr2) <- c(4,11)})
Error : in 'timezero<-': the zero-time 't0' must be a single number
> try({rr2 <- r2; timezero(rr2) <- 4})
Error : in 'timezero<-': the zero-time 't0' must occur no later than the first observation
> rr2 <- r2
> coef(rr2,c("r","phi"),transform=TRUE) <- coef(r2,c("r","phi"),transform=TRUE)
Warning message:
in 'coef<-':  names of 'value' are being discarded 
> stopifnot(all.equal(coef(rr2),coef(r2)))
> 
> r3 <- pomp(
+            ricker,
+            dmeasure="_ricker_poisson_dmeasure",
+            PACKAGE="pomp",
+            paramnames=c("r","sigma","phi","c"),
+            statenames=c("N","e"),
+            obsnames=c("y")
+            )
> coef(r3) <- coef(r2)
> y3 <- obs(simulate(r3,seed=1066L))
> max(abs(y1-y3))
[1] 0
> r4 <- pomp(
+            r2,
+            rmeasure="_ricker_poisson_rmeasure",
+            PACKAGE="pomp",
+            paramnames=c("r","sigma","phi","c"),
+            statenames=c("N","e"),
+            obsnames=c("y")
+            )
> coef(r4) <- coef(r2)
> y4 <- obs(simulate(r4,seed=1066L))
> max(abs(y1-y4))
[1] 0
> 
> dat <- as.data.frame(ricker)
> try(pomp(dat) -> po)
Error : 'times' is a required argument
> try(pomp(dat,times="time",t0=0,covar=dat) -> po)
Error : in 'pomp': if 'covar' is supplied, 'tcovar' must also be supplied
> try(pomp(dat,times="time",t0=0,covar=dat,tcovar=3) -> po)
Error : in 'pomp': if 'covar' is a data frame, 'tcovar' should indicate the time variable
> pomp(dat,times="time",t0=0,covar=dat,tcovar=1) -> po
> pomp(dat,times=1,t0=0,covar=dat,tcovar=1) -> po
> try(pomp(dat,times="time",t0=0,covar=dat,tcovar="bob") -> po)
Error : in 'pomp': if 'covar' is a data frame, 'tcovar' should indicate the time variable
> try(pomp(dat,times="time",t0=0,covar=dat,tcovar=1,covarnames="henry") -> po)
Error : in 'pomp': covariate(s) 'henry' are not among the columns of 'covar'
> try(pomp(dat,times="time",t0=0,fromEstimationScale=identity) -> po)
Error : in 'pomp': if one of 'toEstimationScale', 'fromEstimationScale' is supplied, then so must the other
> plot(po)
> pomp(dat,times="time",t0=0,skeleton=function(x,t,params,...){x}) -> po
> try(pomp())
Error : in 'pomp': 'data' is a required argument
> try(pomp(as.matrix(dat),times=dat$time,t0=0) -> po)
Error : in 'pomp': 'data' must be a data frame or an object of class 'pomp'
> pomp(dat,times="time",t0=0,skeleton=function(x,t,params,...){x}) -> po
> try(pomp(dat,times="bob",t0=0,skeleton=function(x,t,params,...){x}) -> po)
Error : in 'pomp': when 'data' is a data frame, 'times' must identify a single column of 'data' either by name or by index.
> try(pomp(dat,times=11,t0=0,skeleton=function(x,t,params,...){x}) -> po)
Error : in 'pomp': when 'data' is a data frame, 'times' must identify a single column of 'data' either by name or by index.
> try(pomp(dat,times=1.1,t0=0,skeleton=function(x,t,params,...){x}) -> po)
Error : in 'pomp': when 'data' is a data frame, 'times' must identify a single column of 'data' either by name or by index.
> try(pomp(dat$y,times=dat$time,t0=0) -> po)
Error : in 'pomp': 'data' must be a data frame or an object of class 'pomp'
> pomp(dat,times=1,t0=0,skeleton=function(x,t,params,...){x}) -> po
> try(pomp(dat$y,times=dat$time[1:10],t0=0) -> po)
Error : in 'pomp': 'data' must be a data frame or an object of class 'pomp'
> try(pomp(ricker,skeleton=identity(identity)) -> po)
Error : in 'pomp': in 'skeleton': 'skeleton' must be a function of prototype skeleton(x, t, params, ...)
> try(pomp(ricker,toEstimationScale=identity) -> po)
Error : in 'pomp': if one of 'toEstimationScale', 'fromEstimationScale' is supplied, then so must the other
> try(pomp(ricker,fromEstimationScale=identity) -> po)
Error : in 'pomp': if one of 'toEstimationScale', 'fromEstimationScale' is supplied, then so must the other
> try(pomp("banana"))
Error : in 'pomp': 'data' must be a data frame or an object of class 'pomp'
> pomp(pomp(ricker,rprocess=NULL),dprocess=NULL) -> po
> pomp(ricker,measurement.model=y~pois(N),rmeasure=Csnippet("y=rpois(N);")) -> po
Warning message:
in 'pomp': specifying 'measurement.model' overrides specification of 'rmeasure' and 'dmeasure' 
> 
> xdat <- ricker@data
> nm <- dimnames(xdat)
> dim(xdat) <- c(nrow(xdat),1,ncol(xdat))
> dimnames(xdat) <- list(nm[[1]],NULL,nm[[2]])
> try(pomp(xdat,times=dat$time,t0=0) -> po)
Error : in 'pomp': 'data' must be a data frame or an object of class 'pomp'
> 
> try(pompExample(bob))
Error : in 'pompExample': cannot find file 'bob.R'
> try(pompExample("bob"))
Error : in 'pompExample': cannot find file 'bob.R'
> pompExample("ricker")
newly created object(s):
 ricker 
> pomp(ricker) -> ricker
> pomp(ricker,rmeasure=Csnippet("y=rpois(N);"),statenames="N") -> po
> simulate(po) -> po
> try(pomp(po,params=c("A","B")))
Error : in 'pomp': 'params' must be a named numeric vector
> ## force recompile
> file.remove(list.files(path=file.path(tempdir(),Sys.getpid()),
+                        pattern=paste0(po@solibs[[1]]$name,".*"),
+                        full.names=TRUE))
[1] TRUE TRUE
> simulate(po) -> po
> 
> plot(po,yax.flip=TRUE)
> 
> try(pomp(as.data.frame(ricker)))
Error : 'times' is a required argument
> try(pomp(as.data.frame(ricker),times="time"))
Error : 't0' is a required argument
> try(pomp(data.frame(t=10:1,y=1:10),times="t",t0=0))
Error : in 'pomp': 'times' must be an increasing numeric vector
> try(pomp(data.frame(t=c(1:9,NA),y=1:10),times="t",t0=0))
Error : in 'pomp': 'times' must be an increasing numeric vector
> try(pomp(data.frame(t="A",y=1:10),times="t",t0=0))
Error : in 'pomp': 'times' must be an increasing numeric vector
> try(pomp(data.frame(t=1:10,y=1:10),times="t",t0=c(3,4)))
Error : in 'pomp': the zero-time 't0' must be a single number
> try(pomp(data.frame(t=1:10,y=1:10),times="t",t0="Q"))
Error : in 'pomp': the zero-time 't0' must be a single number
> 
> try(pomp:::render("bob is {%one%} and {%two%}",
+   one="good",
+   two=c("bad","five"),
+   three=c("yellow","red","green")))
Error : in 'render' incommensurate lengths of replacements
> 
> dev.off()
null device 
          1 
> 
